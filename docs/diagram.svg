<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="603px" preserveAspectRatio="none" style="width:794px;height:603px;background:#FFFFFF;" version="1.1" viewBox="0 0 794 603" width="794px" zoomAndPan="magnify"><defs/><g><!--MD5=[cf7212f148c2a2f46c357ea31d18a0ad]
class Cache--><g id="elem_Cache"><rect codeLine="1" fill="#F1F1F1" height="162.0781" id="Cache" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="460" x="7" y="7"/><ellipse cx="210.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M213.7188,28.6406 Q213.1406,28.9375 212.5,29.0781 Q211.8594,29.2344 211.1563,29.2344 Q208.6563,29.2344 207.3281,27.5938 Q206.0156,25.9375 206.0156,22.8125 Q206.0156,19.6875 207.3281,18.0313 Q208.6563,16.375 211.1563,16.375 Q211.8594,16.375 212.5,16.5313 Q213.1563,16.6875 213.7188,16.9844 L213.7188,19.7031 Q213.0938,19.125 212.5,18.8594 Q211.9063,18.5781 211.2813,18.5781 Q209.9375,18.5781 209.25,19.6563 Q208.5625,20.7188 208.5625,22.8125 Q208.5625,24.9063 209.25,25.9844 Q209.9375,27.0469 211.2813,27.0469 Q211.9063,27.0469 212.5,26.7813 Q213.0938,26.5 213.7188,25.9219 L213.7188,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="231.25" y="27.8467">Cache</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="466" y1="39" y2="39"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="49.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="27" y="55.9951">int block_size</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="65.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="27" y="72.292">int line_number</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="466" y1="79.5938" y2="79.5938"/><ellipse cx="18" cy="93.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="261" x="27" y="96.5889">Cache(int block_size, int line_number)</text><ellipse cx="18" cy="109.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="27" y="112.8857">int inCache(int addr)</text><ellipse cx="18" cy="125.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="434" x="27" y="129.1826">void insertLine(int line, int *block, int addr, CACHE_STATE state)</text><ellipse cx="18" cy="142.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="27" y="145.4795">void modifyLine(int line, int idx, int value)</text><ellipse cx="18" cy="158.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="27" y="161.7764">int nextLine()</text></g><!--MD5=[c9358792790c506144faa691a06ff077]
class CacheController--><g id="elem_CacheController"><rect codeLine="11" fill="#F1F1F1" height="162.0781" id="CacheController" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="408" x="33" y="229"/><ellipse cx="177.25" cy="245" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M180.2188,250.6406 Q179.6406,250.9375 179,251.0781 Q178.3594,251.2344 177.6563,251.2344 Q175.1563,251.2344 173.8281,249.5938 Q172.5156,247.9375 172.5156,244.8125 Q172.5156,241.6875 173.8281,240.0313 Q175.1563,238.375 177.6563,238.375 Q178.3594,238.375 179,238.5313 Q179.6563,238.6875 180.2188,238.9844 L180.2188,241.7031 Q179.5938,241.125 179,240.8594 Q178.4063,240.5781 177.7813,240.5781 Q176.4375,240.5781 175.75,241.6563 Q175.0625,242.7188 175.0625,244.8125 Q175.0625,246.9063 175.75,247.9844 Q176.4375,249.0469 177.7813,249.0469 Q178.4063,249.0469 179,248.7813 Q179.5938,248.5 180.2188,247.9219 L180.2188,250.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="197.75" y="249.8467">CacheController</text><line style="stroke:#181818;stroke-width:0.5;" x1="34" x2="440" y1="261" y2="261"/><line style="stroke:#181818;stroke-width:0.5;" x1="34" x2="440" y1="269" y2="269"/><polygon fill="#FFFF44" points="44,277.6484,48,281.6484,44,285.6484,40,281.6484" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="53" y="285.9951">void writeMemory(int line)</text><polygon fill="#FFFF44" points="44,293.9453,48,297.9453,44,301.9453,40,297.9453" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="53" y="302.292">void readMemory(int line, int addr, CACHE_STATE state)</text><polygon fill="#FFFF44" points="44,310.2422,48,314.2422,44,318.2422,40,314.2422" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="382" x="53" y="318.5889">int readLine(int block, CACHE_STATE state=EXCLUSIVE)</text><ellipse cx="44" cy="331.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="53" y="334.8857">void write(int addr, int word)</text><ellipse cx="44" cy="347.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="53" y="351.1826">int read(int addr);</text><ellipse cx="44" cy="364.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="53" y="367.4795">bool busRead(int addr)</text><ellipse cx="44" cy="380.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155" x="53" y="383.7764">void busWrite(int addr)</text></g><!--MD5=[9a924eab939593a7deac27fdb53a80a8]
class DataBus--><g id="elem_DataBus"><rect codeLine="21" fill="#F1F1F1" height="145.7813" id="DataBus" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="377" x="245.5" y="451"/><ellipse cx="400.25" cy="467" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M403.2188,472.6406 Q402.6406,472.9375 402,473.0781 Q401.3594,473.2344 400.6563,473.2344 Q398.1563,473.2344 396.8281,471.5938 Q395.5156,469.9375 395.5156,466.8125 Q395.5156,463.6875 396.8281,462.0313 Q398.1563,460.375 400.6563,460.375 Q401.3594,460.375 402,460.5313 Q402.6563,460.6875 403.2188,460.9844 L403.2188,463.7031 Q402.5938,463.125 402,462.8594 Q401.4063,462.5781 400.7813,462.5781 Q399.4375,462.5781 398.75,463.6563 Q398.0625,464.7188 398.0625,466.8125 Q398.0625,468.9063 398.75,469.9844 Q399.4375,471.0469 400.7813,471.0469 Q401.4063,471.0469 402,470.7813 Q402.5938,470.5 403.2188,469.9219 L403.2188,472.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="420.75" y="471.8467">DataBus</text><line style="stroke:#181818;stroke-width:0.5;" x1="246.5" x2="621.5" y1="483" y2="483"/><line style="stroke:#181818;stroke-width:0.5;" x1="246.5" x2="621.5" y1="491" y2="491"/><ellipse cx="256.5" cy="504.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="265.5" y="507.9951">DataBus(Memory *m)</text><ellipse cx="256.5" cy="520.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="265.5" y="524.292">void addCache(CacheController *c);</text><ellipse cx="256.5" cy="537.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="239" x="265.5" y="540.5889">void writeMemory(int addr, int *src)</text><ellipse cx="256.5" cy="553.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="265.5" y="556.8857">void readMemory(int addr, int *dest)</text><ellipse cx="256.5" cy="569.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="351" x="265.5" y="573.1826">bool broadcastWrite(CacheController *src, int addr)</text><ellipse cx="256.5" cy="586.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="350" x="265.5" y="589.4795">void broadcastRead(CacheController *src, int addr)</text></g><!--MD5=[a40b17eea413225aac43454b95ec0b4d]
class Memory--><g id="elem_Memory"><rect codeLine="30" fill="#F1F1F1" height="129.4844" id="Memory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="311" x="476.5" y="245.5"/><ellipse cx="600.25" cy="261.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M603.2188,267.1406 Q602.6406,267.4375 602,267.5781 Q601.3594,267.7344 600.6563,267.7344 Q598.1563,267.7344 596.8281,266.0938 Q595.5156,264.4375 595.5156,261.3125 Q595.5156,258.1875 596.8281,256.5313 Q598.1563,254.875 600.6563,254.875 Q601.3594,254.875 602,255.0313 Q602.6563,255.1875 603.2188,255.4844 L603.2188,258.2031 Q602.5938,257.625 602,257.3594 Q601.4063,257.0781 600.7813,257.0781 Q599.4375,257.0781 598.75,258.1563 Q598.0625,259.2188 598.0625,261.3125 Q598.0625,263.4063 598.75,264.4844 Q599.4375,265.5469 600.7813,265.5469 Q601.4063,265.5469 602,265.2813 Q602.5938,265 603.2188,264.4219 L603.2188,267.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="620.75" y="266.3467">Memory</text><line style="stroke:#181818;stroke-width:0.5;" x1="477.5" x2="786.5" y1="277.5" y2="277.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="484.5" y="288.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="496.5" y="294.4951">int block_size</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="484.5" y="304.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="496.5" y="310.792">int block_number</text><line style="stroke:#181818;stroke-width:0.5;" x1="477.5" x2="786.5" y1="318.0938" y2="318.0938"/><ellipse cx="487.5" cy="331.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="285" x="496.5" y="335.0889">Memory(int block_size, int block_number)</text><ellipse cx="487.5" cy="348.0391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="222" x="496.5" y="351.3857">void getBlock(int addr, int *dest)</text><ellipse cx="487.5" cy="364.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211" x="496.5" y="367.6826">void setBlock(int addr, int *src)</text></g><!--MD5=[f8dbe77922e81f6347c289dad9d89887]
reverse link Cache to CacheController--><g id="link_Cache_CacheController"><path codeLine="39" d="M237,174.08 C237,192.02 237,210.89 237,228.64 " fill="none" id="Cache-backto-CacheController" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="237,169.05,233,178.05,237,174.05,241,178.05,237,169.05" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[44ac09eedd6214d96aa125d332068bd0]
link CacheController to DataBus--><g id="link_CacheController_DataBus"><path codeLine="40" d="M314.9,394.83 C330.88,412.03 347.61,430.04 363.32,446.94 " fill="none" id="CacheController-DataBus" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="366.86,450.75,363.6615,441.435,363.4556,447.0881,357.8024,446.8821,366.86,450.75" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="311.48,391.15,314.6785,400.465,314.8844,394.8119,320.5376,395.0179,311.48,391.15" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4ce2e4b8ef11e40325bbaa7ae6efb170]
reverse link Memory to DataBus--><g id="link_Memory_DataBus"><path codeLine="41" d="M569.15,378.29 C547.55,401.42 523.29,427.4 501.35,450.89 " fill="none" id="Memory-backto-DataBus" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="572.59,374.61,563.5244,378.459,569.1779,378.2648,569.3721,383.9183,572.59,374.61" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b6df3c3611c535a4694e805c56707937]
@startuml
Class Cache {
  - int block_size
  - int line_number
  + Cache(int block_size, int line_number)
  + int inCache(int addr)
  + void insertLine(int line, int *block, int addr, CACHE_STATE state)
  + void modifyLine(int line, int idx, int value)
  + int nextLine()
}

Class CacheController {
  # void writeMemory(int line)
  # void readMemory(int line, int addr, CACHE_STATE state)
  # int readLine(int block, CACHE_STATE state=EXCLUSIVE)
  + void write(int addr, int word)
  + int read(int addr);
  + bool busRead(int addr)
  + void busWrite(int addr)
}

Class DataBus {
  + DataBus(Memory *m)
  + void addCache(CacheController *c);
  + void writeMemory(int addr, int *src)
  + void readMemory(int addr, int *dest)
  + bool broadcastWrite(CacheController *src, int addr)
  + void broadcastRead(CacheController *src, int addr)
}

Class Memory {
  - int block_size
  - int block_number
  + Memory(int block_size, int block_number)
  + void getBlock(int addr, int *dest)
  + void setBlock(int addr, int *src)
}


Cache <- - CacheController
CacheController <- -> DataBus
Memory <- - DataBus

@enduml

PlantUML version 1.2022.7(Mon Aug 22 14:01:30 BRT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>